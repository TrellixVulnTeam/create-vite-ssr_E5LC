/// <reference types="node" />
import { PageFile } from '../shared/getPageFiles';
import { PromiseType } from './utils';
import type { PageAsset } from './html/injectAssets';
import { StreamPipeNode, StreamPipeWeb, StreamReadableNode, StreamReadableWeb } from './html/stream';
import { PageContextUrls } from '../shared/addComputedUrlProps';
import { GlobalContext } from './globalContext';
import type { ViteDevServer } from 'vite';
import { ViteManifest } from './viteManifest';
export { renderPage };
export { prerenderPage };
export { renderStatic404Page };
export { loadPageFilesServer };
declare type PageFiles = PromiseType<ReturnType<typeof loadPageFilesServer>>;
declare type GlobalRenderingContext = GlobalContext & {
    _allPageIds: string[];
    _pageFilesAll: PageFile[];
};
declare function renderPage_<PageContextAdded extends {}, PageContextInit extends {
    url: string;
}>(pageContextInit: PageContextInit): Promise<PageContextInit & {
    errorWhileRendering: unknown;
} & (({
    httpResponse: HttpResponse;
} & PageContextAdded) | ({
    httpResponse: null;
} & Partial<PageContextAdded>))>;
declare function renderPage(pageContextInit: Parameters<typeof renderPage_>[0]): ReturnType<typeof renderPage_>;
declare type StatusCode = 200 | 404 | 500;
declare type ContentType = 'application/json' | 'text/html';
declare type HttpResponse = {
    statusCode: StatusCode;
    contentType: ContentType;
    body: string;
    getBody: () => Promise<string>;
    getNodeStream: () => Promise<StreamReadableNode>;
    getWebStream: () => Promise<StreamReadableWeb>;
    pipeToNodeWritable: StreamPipeNode;
    pipeToWebWritable: StreamPipeWeb;
};
declare function prerenderPage(pageContext: {
    url: string;
    routeParams: Record<string, string>;
    _isPreRendering: true;
    _pageId: string;
    _usesClientRouter: boolean;
    _pageContextAlreadyProvidedByPrerenderHook?: true;
} & PageFiles & GlobalRenderingContext): Promise<{
    documentHtml: string;
    pageContextSerialized: null;
    pageContext: (({
        url: string;
        routeParams: Record<string, string>;
        _isPreRendering: true;
        _pageId: string;
        _usesClientRouter: boolean;
        _pageContextAlreadyProvidedByPrerenderHook?: true | undefined;
    } & {
        exports: Record<string, unknown>;
        pageExports: Record<string, unknown>;
        exportsAll: {
            [x: string]: {
                filePath: string;
                exportValue: unknown;
            }[];
        };
    } & {
        _passToClient: string[];
        _isHtmlOnly: boolean;
    } & {
        Page: unknown;
    } & {
        _getPageAssets: () => Promise<PageAsset[]>;
    } & GlobalRenderingContext) & {
        _isPageContextRequest: boolean;
        _urlProcessor: null;
    }) & PageContextUrls;
} | {
    documentHtml: string;
    pageContextSerialized: string;
    pageContext: (({
        url: string;
        routeParams: Record<string, string>;
        _isPreRendering: true;
        _pageId: string;
        _usesClientRouter: boolean;
        _pageContextAlreadyProvidedByPrerenderHook?: true | undefined;
    } & {
        exports: Record<string, unknown>;
        pageExports: Record<string, unknown>;
        exportsAll: {
            [x: string]: {
                filePath: string;
                exportValue: unknown;
            }[];
        };
    } & {
        _passToClient: string[];
        _isHtmlOnly: boolean;
    } & {
        Page: unknown;
    } & {
        _getPageAssets: () => Promise<PageAsset[]>;
    } & GlobalRenderingContext) & {
        _isPageContextRequest: boolean;
        _urlProcessor: null;
    }) & PageContextUrls;
}>;
declare function renderStatic404Page(globalContext: GlobalRenderingContext & {
    _isPreRendering: true;
}): Promise<{
    documentHtml: string;
    pageContextSerialized: null;
    pageContext: (({
        url: string;
        routeParams: Record<string, string>;
        _isPreRendering: true;
        _pageId: string;
        _usesClientRouter: boolean;
        _pageContextAlreadyProvidedByPrerenderHook?: true | undefined;
    } & {
        exports: Record<string, unknown>;
        pageExports: Record<string, unknown>;
        exportsAll: {
            [x: string]: {
                filePath: string;
                exportValue: unknown;
            }[];
        };
    } & {
        _passToClient: string[];
        _isHtmlOnly: boolean;
    } & {
        Page: unknown;
    } & {
        _getPageAssets: () => Promise<PageAsset[]>;
    } & GlobalRenderingContext) & {
        _isPageContextRequest: boolean;
        _urlProcessor: null;
    }) & PageContextUrls;
} | {
    documentHtml: string;
    pageContextSerialized: string;
    pageContext: (({
        url: string;
        routeParams: Record<string, string>;
        _isPreRendering: true;
        _pageId: string;
        _usesClientRouter: boolean;
        _pageContextAlreadyProvidedByPrerenderHook?: true | undefined;
    } & {
        exports: Record<string, unknown>;
        pageExports: Record<string, unknown>;
        exportsAll: {
            [x: string]: {
                filePath: string;
                exportValue: unknown;
            }[];
        };
    } & {
        _passToClient: string[];
        _isHtmlOnly: boolean;
    } & {
        Page: unknown;
    } & {
        _getPageAssets: () => Promise<PageAsset[]>;
    } & GlobalRenderingContext) & {
        _isPageContextRequest: boolean;
        _urlProcessor: null;
    }) & PageContextUrls;
} | null>;
declare function loadPageFilesServer(pageContext: {
    _pageId: string;
    _baseUrl: string;
    _baseAssets: string | null;
    _pageFilesAll: PageFile[];
    _isPreRendering: boolean;
    _isProduction: boolean;
    _viteDevServer: null | ViteDevServer;
    _manifestClient: null | ViteManifest;
}): Promise<{
    exports: Record<string, unknown>;
    pageExports: Record<string, unknown>;
    exportsAll: {
        [x: string]: {
            filePath: string;
            exportValue: unknown;
        }[];
    };
} & {
    _passToClient: string[];
    _isHtmlOnly: boolean;
} & {
    Page: unknown;
} & {
    _getPageAssets: () => Promise<PageAsset[]>;
}>;
