"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveRuntimeConfig = exports.setRuntimeConfig = exports.getRuntimeConfig = void 0;
const utils_1 = require("../utils");
let runtimeConfig = null;
function setRuntimeConfig(runtimeConfig_) {
    (0, utils_1.assert)(runtimeConfig_);
    runtimeConfig = runtimeConfig_;
    (0, utils_1.assertBaseUrl)(runtimeConfig.baseUrl);
}
exports.setRuntimeConfig = setRuntimeConfig;
function getRuntimeConfig() {
    (0, utils_1.assert)(runtimeConfig);
    return runtimeConfig;
}
exports.getRuntimeConfig = getRuntimeConfig;
function resolveRuntimeConfig(viteConfig) {
    const { baseUrl, baseAssets } = resolveBase(viteConfig.base);
    const runtimeConfig = {
        baseUrl,
        baseAssets,
    };
    return runtimeConfig;
}
exports.resolveRuntimeConfig = resolveRuntimeConfig;
function resolveBase(base) {
    let baseUrl = '/';
    let baseAssets = null;
    (0, utils_1.assert)(base);
    if (base.startsWith('http')) {
        baseAssets = base;
    }
    else {
        baseUrl = base;
    }
    return {
        baseUrl,
        baseAssets,
    };
}
