import{r as h,j as f,F as g,a as p,R as b}from"./chunk-b0b50060.js";import{r as d}from"./chunk-eb00f8b0.js";function m(t,n){return m=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e},m(t,n)}function w(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n)}var x=function(n,i){return n===void 0&&(n=[]),i===void 0&&(i=[]),n.length!==i.length||n.some(function(e,r){return!Object.is(e,i[r])})},y={error:null},E=function(t){w(n,t);function n(){for(var e,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,e.state=y,e.resetErrorBoundary=function(){for(var o,l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];e.props.onReset==null||(o=e.props).onReset.apply(o,c),e.reset()},e}n.getDerivedStateFromError=function(r){return{error:r}};var i=n.prototype;return i.reset=function(){this.setState(y)},i.componentDidCatch=function(r,s){var a,o;(a=(o=this.props).onError)==null||a.call(o,r,s)},i.componentDidUpdate=function(r,s){var a=this.state.error,o=this.props.resetKeys;if(a!==null&&s.error!==null&&x(r.resetKeys,o)){var l,c;(l=(c=this.props).onResetKeysChange)==null||l.call(c,r.resetKeys,o),this.reset()}},i.render=function(){var r=this.state.error,s=this.props,a=s.fallbackRender,o=s.FallbackComponent,l=s.fallback;if(r!==null){var c={error:r,resetErrorBoundary:this.resetErrorBoundary};if(h.exports.isValidElement(l))return l;if(typeof a=="function")return a(c);if(o)return h.exports.createElement(o,c);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},n}(h.exports.Component);const N=({children:t,routeTransitioning:n})=>f(g,{children:[p(S,{transitioning:n}),f("div",{className:"flex max-w-900px m-auto",children:[f("div",{className:"p-5 flex-shrink-0 flex flex-col items-end leading-7",children:[p("h1",{className:"my-4 text-2xl",children:"Vite SSR Relay"}),Object.entries({"/":"Home","/repo/xiniha/vilay/issues":"Issues","/repo/xiniha/vilay/issues/create":"Create Issue"}).map(([e,r])=>p("a",{href:e,className:"text-base hover:text-1.05rem transition-all duration-300",children:r},e))]}),p("div",{className:"p-5 pb-12 border-l-2 border-#eee min-h-screen",children:p(E,{FallbackComponent:R,children:p(b.Suspense,{fallback:"Loading...",children:t})})})]})]}),S=({transitioning:t})=>p("div",{className:"absolute left-0 right-0 top-0 h-2 bg-green-200 transition-opacity duration-300",style:{opacity:t?100:0}}),R=({error:t})=>f(g,{children:["Error: ",t.message]}),v=function(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("unable to locate global object")}(),j=v.fetch||(()=>Promise.reject(new Error("[ohmyfetch] global.fetch is not supported!")));v.Headers;const A=(t,n)=>{const i=d.Network.create(async({text:s},a)=>{const o=await j("https://api.github.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer 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"},body:JSON.stringify({query:s,variables:a})});if(o.status!==200)throw console.error(await o.text()),new Error("Relay Network Error: Invalid response from server");return await o.json()}),e=new d.RecordSource(n),r=new d.Store(e,{gcReleaseBufferSize:10});return new d.Environment({configName:t?"server":"client",network:i,store:r})},O={title:"Vite SSR app",meta:{description:"App using Vite + vite-plugin-ssr"}};export{N as PageLayout,O as head,A as initRelayEnvironment};
